<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Custom Questionnaires / Pages ‚Ä¢ occupationMeasurement</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Custom Questionnaires / Pages">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">occupationMeasurement</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/occupationMeasurement.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/app.html">Using the Interactive App</a></li>
    <li><a class="dropdown-item" href="../articles/app-questionnaire.html">Custom Questionnaires / Pages</a></li>
    <li><a class="dropdown-item" href="../articles/app-database.html">Saving App Data in a Database</a></li>
    <li><a class="dropdown-item" href="../articles/app-deployment.html">Deploying to a Server / the Cloud</a></li>
    <li><a class="dropdown-item" href="../articles/api.html">Using the API</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/occupationMeasurement/occupationMeasurement/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Custom Questionnaires / Pages</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/occupationMeasurement/occupationMeasurement/blob/main/vignettes/app-questionnaire.Rmd" class="external-link"><code>vignettes/app-questionnaire.Rmd</code></a></small>
      <div class="d-none name"><code>app-questionnaire.Rmd</code></div>
    </div>

    
    
<p>When using the interactive shiny app you can use one of the different
available questionnaires to e.g.¬†conduct a web survey
(<code><a href="../reference/questionnaire_web_survey.html">questionnaire_web_survey()</a></code>) or collect data from
interviewer-administered (phone) interviews
(<code><a href="../reference/questionnaire_interviewer_administered.html">questionnaire_interviewer_administered()</a></code>).</p>
<p>To be as flexible as possible, you can also modify these existing
questionnaires or just build your own one from scratch.</p>
<div class="section level2">
<h2 id="pages">Pages üìÉ<a class="anchor" aria-label="anchor" href="#pages"></a>
</h2>
<p>All questionnaires are built on top of pages. New pages can be
created using the function <code><a href="../reference/new_page.html">new_page()</a></code>, the documentation of
which is essential reading for those who want to design their own
pages.</p>
<p>There exist some helper functions that make it simple to create
specific types of question pages:</p>
<ul>
<li><code><a href="../reference/page_choose_one_option.html">page_choose_one_option()</a></code></li>
<li><code><a href="../reference/page_freetext.html">page_freetext()</a></code></li>
</ul>
<p>In general each page has a unique <code>page_id</code> to identify
itself and follows a general principle of lifecycle functions. Most of
these lifecycle functions are optional, except for the
<code>render</code> function, which should return the shiny <a href="https://shiny.posit.co/r/articles/build/tag-glossary/" class="external-link">HTML
tags</a> or inputs / outputs to be displayed. All lifecycle functions
take at least the shiny session as arguments, other arguments depend on
the function itself (supported arguments are listed in
<code><a href="../reference/new_page.html">new_page()</a></code>).</p>
<blockquote>
<p>Tip: When implementing your own pages, we recommend to use
<code>...</code> as the last parameter in all of them to allow for
potentially new parameters to be added.</p>
</blockquote>
<p>To find some useful pre-built pages or helper functions to easily
generate commonly used pages check out all functions whose name starts
with <code>page_</code> in the reference.</p>
<div class="section level3">
<h3 id="page-lifecycle">Page Lifecycle<a class="anchor" aria-label="anchor" href="#page-lifecycle"></a>
</h3>
<p>The lifecycle of a page is as follows: First, its
<code>condition</code> will be run to check whether the page should be
displayed at all. If this function returns <code>FALSE</code> the page
will be skipped and the condition for the following one will be
evaluated.</p>
<p>If the condition is <code>TRUE</code>, the page will be shown. To do
this the function <code>run_before</code> will be run to prepare
everything for the page, followed by <code>render</code> to generate the
page‚Äôs actual outputs (ata returned from <code>run_before</code> is
available in <code>render</code> under the name
<code>run_before_output</code>).</p>
<p>When the user navigates away from a page and to the next page, the
function <code>run_after</code> will be called which can be used to
capture user input and save data. Then, the next page‚Äôs
<code>condition</code> will be checked and so on.</p>
<p>If the user wants to go back to the previous page,
<code>run_after</code> will not be called and the previous page will be
shown. The <code>condition</code> of the page that the user visited
before will not be checked again.</p>
<p>A more detailed description of the page lifecycle can be found in the
documentation for <code><a href="../reference/new_page.html">new_page()</a></code>.</p>
</div>
<div class="section level3">
<h3 id="saving-data">Saving Data<a class="anchor" aria-label="anchor" href="#saving-data"></a>
</h3>
<p>All existing pages (e.g.¬†<code><a href="../reference/page_first_freetext.html">page_first_freetext()</a></code>,
<code><a href="../reference/page_select_suggestion.html">page_select_suggestion()</a></code>) and page helpers
(e.g.<code><a href="../reference/page_choose_one_option.html">page_choose_one_option()</a></code>,
<code><a href="../reference/page_freetext.html">page_freetext()</a></code>) will automatically save user input (as
long as it is not explicitly disabled in the
<code>app_settings</code>).</p>
<p>When building your own pages from scratch, however, you will have to
make sure to specify which data should be saved in the app. This can be
done by using <code><a href="../reference/set_item_data.html">set_item_data()</a></code>. If data is saved using this
function, it will automatically be saved with the other data, yet we
always recommend verifying that questionnaire data is saved as expected
before starting proper data collection.</p>
<p>For a detailed description of what data is saved by default and in
which format, examine the section ‚Äúdata‚Äù in
<code><a href="../articles/app.html">vignette("app")</a></code>.</p>
</div>
</div>
<div class="section level2">
<h2 id="questionnaires">Questionnaires üìë<a class="anchor" aria-label="anchor" href="#questionnaires"></a>
</h2>
<div class="section level3">
<h3 id="building-your-own">Building your Own ‚ú®<a class="anchor" aria-label="anchor" href="#building-your-own"></a>
</h3>
<p>Once you‚Äôre comfortable building your own pages, building your own
questionnaire is trivial, as a questionnaire is merely a list of
pages.</p>
<p>An example for a simple questionnaire would be:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://occupationMeasurement.github.io/occupationMeasurement/" class="external-link">occupationMeasurement</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.posit.co/" class="external-link">shiny</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">my_simple_questionnaire</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/new_page.html">new_page</a></span><span class="op">(</span></span>
<span>    page_id <span class="op">=</span> <span class="st">"test"</span>,</span>
<span>    render <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="st">"Hello!"</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="../reference/button_next.html">button_previous</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="../reference/button_next.html">button_next</a></span><span class="op">(</span><span class="op">)</span></span>
<span>      <span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span>,</span>
<span></span>
<span>  <span class="co"># Create a custom page to choose your favorite meal</span></span>
<span>  <span class="fu"><a href="../reference/page_choose_one_option.html">page_choose_one_option</a></span><span class="op">(</span></span>
<span>    page_id <span class="op">=</span> <span class="st">"favourite_meal"</span>,</span>
<span>    question_text <span class="op">=</span> <span class="st">"Please pick your favorite kind of meal."</span>,</span>
<span>    list_of_choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      <span class="st">"Breakfast"</span> <span class="op">=</span> <span class="fl">1</span>,</span>
<span>      <span class="st">"Lunch"</span> <span class="op">=</span> <span class="fl">2</span>,</span>
<span>      <span class="st">"Dinner"</span> <span class="op">=</span> <span class="fl">3</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Test the questionnaire in the app</span></span>
<span><span class="co"># app(questionnaire = my_simple_questionnaire)</span></span></code></pre></div>
<p>As the general goal of this package is the measurement of
occupations, you will usually want to at least include the core set of
pages:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="co"># ... some of your pages before ...</span></span>
<span>  <span class="fu"><a href="../reference/page_first_freetext.html">page_first_freetext</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="../reference/page_second_freetext.html">page_second_freetext</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="../reference/page_select_suggestion.html">page_select_suggestion</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="../reference/page_none_selected_freetext.html">page_none_selected_freetext</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="../reference/page_followup.html">page_followup</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="../reference/page_followup.html">page_followup</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span></span>
<span>  <span class="co"># ... some of your pages after ...</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="modifying-an-existing-one">Modifying an Existing One<a class="anchor" aria-label="anchor" href="#modifying-an-existing-one"></a>
</h3>
<p>Apart from creating a new questionnaire from scratch, it‚Äôs also
possible to take an existing questionnaire and modify it to suit your
needs.</p>
<p>To do this you can modify the questionnaire itself, by adding,
removing or overwriting pages into it (as the questionnaire is just a
list, it can be modified just like one).</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://occupationMeasurement.github.io/occupationMeasurement/" class="external-link">occupationMeasurement</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.posit.co/" class="external-link">shiny</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">questionnaire</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/questionnaire_web_survey.html">questionnaire_web_survey</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Remove the first page (welcome)</span></span>
<span><span class="va">questionnaire</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span></span>
<span><span class="co"># Use c() to add a new alternative page at the start</span></span>
<span><span class="va">questionnaire</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/new_page.html">new_page</a></span><span class="op">(</span></span>
<span>      <span class="st">"my_welcome"</span>,</span>
<span>      render <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h1</a></span><span class="op">(</span><span class="st">"Hello!"</span><span class="op">)</span><span class="op">)</span></span>
<span>      <span class="op">}</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  <span class="va">questionnaire</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Test the questionnaire in the app</span></span>
<span><span class="co"># app(questionnaire = questionnaire)</span></span></code></pre></div>
<p>Alternatively it‚Äôs also possible to modify pages themselves (albeit a
bit more complicated). Under the hood, pages are essentially also
powered by lists and therefore their parameters can just be overwritten
e.g.¬†removing a page‚Äôs condition check can be done by overwriting it via
<code>page$condition &lt;- NULL</code>.</p>
<p>As a page‚Äôs different parameters usually depend on each other it‚Äôs
much easier to accidentaly break something. Therefore it is in general a
good practice to overwrite a page‚Äôs function by just wrapping it, like
the example below.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://occupationMeasurement.github.io/occupationMeasurement/" class="external-link">occupationMeasurement</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.posit.co/" class="external-link">shiny</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">questionnaire</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/questionnaire_web_survey.html">questionnaire_web_survey</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add some text to page_select_suggestion</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">questionnaire</span><span class="op">[[</span><span class="fl">4</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">page_id</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "none_selected_freetext"</span></span>
<span></span>
<span><span class="va">original_select_suggestion_render</span> <span class="op">&lt;-</span> <span class="va">questionnaire</span><span class="op">[[</span><span class="fl">4</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">render</span></span>
<span><span class="va">questionnaire</span><span class="op">[[</span><span class="fl">4</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">render</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">p</a></span><span class="op">(</span><span class="st">"~ My custom text before ~"</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu">original_select_suggestion_render</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Test the questionnaire in the app</span></span>
<span><span class="co"># app(questionnaire = questionnaire)</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jan Simson, Olga Kononykhina, Malte Schierholz.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
